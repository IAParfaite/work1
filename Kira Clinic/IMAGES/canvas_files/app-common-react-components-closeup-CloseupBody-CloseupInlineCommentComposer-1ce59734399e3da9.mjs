"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[68357],{272965:(e,t,i)=>{i.r(t),i.d(t,{default:()=>C});var n=i(667294),o=i(702664),s=i(883119),a=i(161881),r=i(903591),m=i(53264),_=i(214877),d=i(454514),l=i(140017),c=i(96452),u=i(13848),p=i(149722),g=i(413110),f=i(923368),h=i(930822),A=i(785893);function C({aggregatedPinDataId:e,closeupAttributionId:t,commentCount:i,disablePhotoCommentSelection:C,inCommentFeedRedesignExp:y,isDesktopSheetModal:x=!1,isEligibleForPinReactions:D,isPDP:S,orbacSubjectId:E,pinId:L,privatePin:N,reactionByMe:O,reactionCounts:P,setIsLoadingNewlyCreatedComment:j,showCommentComposer:v,showReactBackground:w,storyPinDataId:b,viewParameter:I}){let B=(0,l.ZP)(),M=(0,p.Z)(),Z=(0,o.useDispatch)(),{logContextEvent:k}=(0,_.v)(),R=(0,a.Z)(),{showOneToast:T}=(0,u.F9)(),{stackedCloseupEnabled:U}=(0,f.x4)(),[z,F]=(0,n.useState)(!1),[H,K]=(0,n.useState)(r.A9.NONE);async function W(i){let{contentMarkdown:n,force:o,imageSignatures:s,tags:a}=i;if(null===e)return!1;j(!0);try{if(e){if(s.length){let t={aggregatedPinDataId:e,details:n,image_signatures:s,pin_id:L??"",username:M.username||"",fromUnifiedComment:!0};await Z((0,h.DD)(t))}else await R({force:o,fromUnifiedComment:!0,objectType:g.o.pin,objectId:e,pinId:L,tags:a,text:n,orbacSubjectId:E});k({event_type:7,object_id_str:L,aux_data:{num_user_mention_tags:(a?JSON.parse(a):[]).length,...b?{creator_id:t,story_pin_data_id:b}:{}}})}}catch(e){return[c.ky,c.LJ].includes(e.api_error_code)?K(e.api_error_code===c.ky?r.A9.WARNING:r.A9.BLOCK):T(({hideToast:t})=>(0,A.jsx)(d.ZP,{onHide:t,text:e.message_detail||e.message||B._('There was an issue posting your comment.', 'comment.post.errorMessage', 'error message for posting comment in toast'),type:"error"})),j(!1),!1}return F(!1),j(!1),!0}return(0,A.jsx)(s.xu,{marginEnd:S?U?2:8:U?1:0,marginStart:U?2:S?y?8:6:0,width:x?"100%":void 0,children:(0,A.jsx)(m.Z,{commentCount:i,commentWarningModalState:H,disablePhotoCommentSelection:C,dismissCommentWarningModal:()=>K(r.A9.NONE),iconSize:S?20:void 0,inCommentFeedRedesignExp:y,isCloseup:U,isDesktopSheetModal:x,isEligibleForPinReactions:D,isLeftAligned:S,objectType:g.o.pin,onAddItem:W,onCancelItem:()=>F(!1),onEnter:()=>F(!0),pinId:L,privatePin:N,reactionByMe:O,reactionCounts:P,showCommentComposer:v,showReactBackground:!S&&w,statusType:z?"textInflightCreation":"textStaticDisplay",viewParameter:I})})}}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/app-common-react-components-closeup-CloseupBody-CloseupInlineCommentComposer-1ce59734399e3da9.mjs.map